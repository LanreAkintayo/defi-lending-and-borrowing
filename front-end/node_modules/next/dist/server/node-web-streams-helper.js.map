{"version":3,"sources":["../../server/node-web-streams-helper.ts"],"names":["readableStreamTee","pipeTo","pipeThrough","chainStreams","streamFromArray","streamToString","encodeText","decodeText","createTransformStream","createBufferedTransformStream","createFlushEffectStream","renderToInitialStream","continueFromInitialStream","renderToStream","createSuffixStream","createPrefixStream","createInlineDataStream","readable","transformStream","TransformStream","transformStream2","writer","writable","getWriter","writer2","reader","getReader","read","then","done","value","close","write","options","resolver","promise","Promise","resolve","process","preventClose","releaseLock","streams","i","length","strings","forEach","str","stream","bufferedString","input","TextEncoder","encode","textDecoder","decode","TextDecoder","flush","transform","source","sink","controller","enqueue","chunk","error","reason","abort","cancel","terminate","desiredSize","maybePromise","err","pendingFlush","flushBuffer","setTimeout","handleFlushEffect","extraChunk","ReactDOMServer","element","renderToReadableStream","suffix","dataStream","generateStaticHTML","flushEffectHandler","renderStream","closeTag","suffixUnclosed","split","allReady","transforms","filter","Boolean","reduce","prefix","prefixFlushed","prefixPrefixFlushFinished","res","dataStreamFinished","dataStreamReader"],"mappings":"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"}